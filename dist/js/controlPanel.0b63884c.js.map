{"version":3,"sources":["webpack:///./src/views/ControlPanel.vue?7778","webpack:///src/views/ControlPanel.vue","webpack:///./src/views/ControlPanel.vue?c821","webpack:///./src/views/ControlPanel.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","fill-height","row","wrap","justify-center","align-center","staticClass","xs12","sm8","md6","three-line","_l","sign","key","avatar","_v","_s","name","date","title","href","url","target","color","fab","small","on","click","$event","aproveUser","denyUser","staticRenderFns","ControlPanelvue_type_script_lang_js_","created","loadData","beforeDestroy","signRef","off","data","undefined","signList","methods","_this","firebase","ref","snapshot","push","Object","objectSpread","val","map","index","splice","payload","updates","concat","update","then","transaction","currentFirms","views_ControlPanelvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","installComponents_default","VBtn","VContainer","VDivider","VFlex","VIcon","VLayout","VList","VListTile","VListTileAction","VListTileContent","components_VList","VListTileSubTitle","VListTileTitle"],"mappings":"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","file":"js/controlPanel.0b63884c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"id\":\"login\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"justify-center\":\"\",\"align-center\":\"\"}},[_c('v-flex',{staticClass:\"pt-4 text-xs-center\",attrs:{\"xs12\":\"\",\"sm8\":\"\",\"md6\":\"\"}},[_c('v-list',{attrs:{\"three-line\":\"\"}},[_vm._l((_vm.signList),function(sign){return _c('v-list-tile',{key:sign.id,attrs:{\"avatar\":\"\"}},[_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(_vm._s(sign.name))]),_c('v-list-tile-sub-title',[_c('span',{staticClass:\"text--primary\"},[_vm._v(_vm._s(sign.date))]),_vm._v(\" â€” \"+_vm._s(sign.title))]),_c('v-list-tile-sub-title',[_c('a',{attrs:{\"href\":sign.url,\"target\":\"_blank\"}},[_vm._v(_vm._s(sign.url))])])],1),_c('v-list-tile-action',[_c('v-btn',{attrs:{\"color\":\"info\",\"fab\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.aproveUser(sign)}}},[_c('v-icon',[_vm._v(\"thumb_up\")])],1)],1),_c('v-list-tile-action',[_c('v-btn',{attrs:{\"color\":\"error\",\"fab\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.denyUser(sign)}}},[_c('v-icon',[_vm._v(\"thumb_down\")])],1)],1)],1)}),_c('v-divider')],2)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container id=\"login\" fill-height>\r\n    <v-layout row wrap justify-center align-center>\r\n      <v-flex xs12 sm8 md6 class=\"pt-4 text-xs-center\">\r\n        <v-list three-line>\r\n          <v-list-tile avatar v-for=\"sign in signList\" :key=\"sign.id\">\r\n            <v-list-tile-content>\r\n              <v-list-tile-title>{{ sign.name }}</v-list-tile-title>\r\n              <v-list-tile-sub-title><span class=\"text--primary\">{{ sign.date }}</span> &mdash; {{ sign.title }}</v-list-tile-sub-title>\r\n              <v-list-tile-sub-title>\r\n                <a :href=\"sign.url\" target=\"_blank\">{{ sign.url }}</a>\r\n              </v-list-tile-sub-title>\r\n            </v-list-tile-content>\r\n            <v-list-tile-action>\r\n              <v-btn color=\"info\" fab small @click=\"aproveUser(sign)\">\r\n                <v-icon>thumb_up</v-icon>\r\n              </v-btn>\r\n            </v-list-tile-action>\r\n            <v-list-tile-action>\r\n              <v-btn color=\"error\" fab small @click=\"denyUser(sign)\">\r\n                <v-icon>thumb_down</v-icon>\r\n              </v-btn>\r\n            </v-list-tile-action>\r\n          </v-list-tile>\r\n          <v-divider/>\r\n        </v-list>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport { database } from '@/plugins/firebase'\r\nexport default {\r\n  name: 'ControlPanel',\r\n  created () {\r\n    this.loadData()\r\n  },\r\n  beforeDestroy () {\r\n    if (this.signRef) {\r\n      this.signRef.off()\r\n    }\r\n  },\r\n  data: () => ({\r\n    signRef: undefined,\r\n    signList: []\r\n  }),\r\n  methods: {\r\n    loadData () {\r\n      this.signList = []\r\n      if (!this.signRef) {\r\n        this.signRef = database.ref(`firms/private`)\r\n        this.signRef.on('child_added', (snapshot) => {\r\n          this.signList.push({\r\n            ...snapshot.val(),\r\n            id: snapshot.key\r\n          })\r\n        })\r\n        this.signRef.on('child_changed', (snapshot) => {\r\n          this.signList.map((val, index) => {\r\n            if (val.id === snapshot.key) {\r\n              this.signList.splice(index, 1, {\r\n                ...snapshot.val(),\r\n                id: snapshot.key\r\n              })\r\n            }\r\n          })\r\n        })\r\n        this.signRef.on('child_removed', (snapshot) => {\r\n          this.signList.map((val, index) => {\r\n            if (val.id === snapshot.key) {\r\n              this.signList.splice(index, 1)\r\n            }\r\n          })\r\n        })\r\n      } else {\r\n        this.signRef.off()\r\n      }\r\n    },\r\n    aproveUser (payload) {\r\n      let updates = {}\r\n      updates[`firms/public/${payload.id}/name`] = payload.name\r\n      updates[`firms/public/${payload.id}/title`] = payload.title\r\n      updates[`firms/public/${payload.id}/url`] = payload.url\r\n      updates[`firms/public/${payload.id}/date`] = payload.date\r\n      updates[`firms/private/${payload.id}/name`] = null\r\n      updates[`firms/private/${payload.id}/title`] = null\r\n      updates[`firms/private/${payload.id}/url`] = null\r\n      updates[`firms/private/${payload.id}/date`] = null\r\n      database\r\n        .ref()\r\n        .update(updates)\r\n        .then(() => {\r\n          database.ref('/totalFirms/').transaction(currentFirms => {\r\n            return currentFirms + 1\r\n          })\r\n        })\r\n    },\r\n    denyUser (payload) {\r\n      let updates = {}\r\n      updates[`firms/private/${payload.id}/name`] = null\r\n      updates[`firms/private/${payload.id}/title`] = null\r\n      updates[`firms/private/${payload.id}/url`] = null\r\n      updates[`firms/private/${payload.id}/date`] = null\r\n      updates[`firms/public/${payload.id}/name`] = null\r\n      updates[`firms/public/${payload.id}/title`] = null\r\n      updates[`firms/public/${payload.id}/url`] = null\r\n      updates[`firms/public/${payload.id}/date`] = null\r\n      database\r\n        .ref()\r\n        .update(updates)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ControlPanel.vue?vue&type=template&id=5e952e89&\"\nimport script from \"./ControlPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./ControlPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!C:/Users/ayala/Laboratorio/canarias_dev/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VContainer } from 'vuetify/lib'\nimport { VDivider } from 'vuetify/lib'\nimport { VFlex } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\nimport { VList } from 'vuetify/lib'\nimport { VListTile } from 'vuetify/lib'\nimport { VListTileAction } from 'vuetify/lib'\nimport { VListTileContent } from 'vuetify/lib'\nimport { VListTileSubTitle } from 'vuetify/lib'\nimport { VListTileTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VContainer,VDivider,VFlex,VIcon,VLayout,VList,VListTile,VListTileAction,VListTileContent,VListTileSubTitle,VListTileTitle})\n"],"sourceRoot":""}